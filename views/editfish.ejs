<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>FISHMART</title>
</head>
<body>
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">FISHMART</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#collapsibleNavbar"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/addFish">Add new fish</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <br />
    <div class="text-center"><h2>Update Fish</h2></div>
    <br />
    <div class="text-center">
      <% if (fish) { %>
      <form
        action="/editFish/<%= fish.fishId %>"
        method="POST"
        enctype="multipart/form-data"
      >
        <label for="name">Fish Name:</label><br />
        <input type="text" id="name" name="name" value="<%= fish.name %>" required /><br /><br />

        <label for="weight">Weight (kg):</label><br />
        <input
          type="number"
          id="weight"
          name="weight"
          value="<%= fish.weight %>"
          required
        /><br /><br />

        <label for="type">Type of Fish:</label><br />
        <select id="type" name="type" required>
          <option value="Freshwater" <% if (fish.type === "Freshwater") { %> selected <% } %>>
            Freshwater
          </option>
          <option value="Saltwater" <% if (fish.type === "Saltwater") { %> selected <% } %>>
            Saltwater
          </option>
        </select><br /><br />

        <label for="length">Length (cm):</label><br />
        <input
          type="number"
          id="length"
          name="length"
          value="<%= fish.length %>"
          required
        /><br /><br />

        <label for="price">Price ($):</label><br />
        <input
          type="number"
          id="price"
          name="price"
          value="<%= fish.price %>"
          required
        /><br /><br />

        <label for="diet">Diet & Use:</label><br />
        <select id="diet" name="diet" required>
          <option value="Food Fish" <% if (fish.diet === "Food Fish") { %> selected <% } %>>
            Food Fish
          </option>
          <option value="Aquarium Fish" <% if (fish.diet === "Aquarium Fish") { %> selected <% } %>>
            Aquarium Fish
          </option>
          <option value="Bait" <% if (fish.diet === "Bait") { %> selected <% } %>>Bait</option>
        </select>
        <br /><br />

        <label for="image">Current Image:</label><br />
        <input
          type="text"
          name="currentImage"
          value="<%= fish.image %>"
          readonly
        /><br />
        <img src="/images/<%= fish.image %>" width="20%" /><br /><br />

        <label>New Image (optional):</label><br />
        <input type="file" id="image" name="image" accept="image/*" /><br /><br />

        <button type="submit">Update Fish</button>
      </form>
      <% } else { %>
      <p>No fish found.</p>
      <% } %>
      <a href="/">Back</a>
    </div>
  </div>
</body>
</html>